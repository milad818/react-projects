<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="react-basics.js"></script>
    <script src="https://unpkg.com/supersimpledev/external-library.js"></script>


    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">
        // Babel will convert JSX to regular JavaScript so browsers can understand it
        // Your JSX code goes here

        function ChatInput() {
            return (
                <>
                    <input
                      type="text"
                      placeholder="Type your message..." size="50"
                    />
                    <button>Send</button>
                </>
            );
        }

        // chat message component
        function ChatMessage(props) {
          // console.log("ChatMessage props:", props);
          
          // const message = props.message;
          // const sender = props.sender;

          // OR alternatively
          // Even without the line below, message and sender can be destructed and passed directly in the function parameters like: { message, sender }
          const { message, sender } = props; // shortcut for props.message and props.sender

          /*
          if (sender === "user") {
            return (
              <div>
                {message}
                <img src={`images/user.jpg`} width="50" />
              </div>
            );
          }
          */

          return (
              <div>
                {sender === "robot" && <img src={`images/robot.jpg`} width="50" />}
                {message}
                {sender === "user" && <img src={`images/user.jpg`} width="50" />}

              </div>
          );
        
          
          // OR ALTERNATIVELY you can use conditional clauses to return
          // which seems more efficient and cleaner BUT images are positioned similary for both
          // return(
          //   // For reproducibility, no message should be passed directly below!
          //   <div>
          //     {message}
          //     <img src={`images/${sender}.jpg`} width="50" /> 
          //   </div>
          // )

        }

        // Elements to pass to the render below
        const button = <button>Click Me!</button>;
        const text = <p>This is a paragraph to be rendered with React.</p>;
        // What if we want to display multiple elements?
        const app = (
            // {ChatInput()} could be an alternative way to call the component NOT RECOMMENDED
            // Also variable like {button} and {text} could be used inside JSX
            // even all different tags could be used directly inside JSX
            <>
                <ChatInput></ChatInput>
                <ChatMessage message="Hello Chatbot!" sender="user" />
                <ChatMessage message="How can I help you?" sender="robot" />
                <ChatMessage message="Can you get me todays date?" sender="user" />
                <ChatMessage message="Today is September 21st." sender="robot" />  
            </>
        );


        function ChatMessages() {
          const chatMessages = [{
            message: 'Hello Chatbot',
            sender: 'user',
            id: 'id1'
          }, {
            message: 'Hello! How can I help you?',
            sender: 'robot',
            id: 'id2'
          }, {
            message: 'Can you get me today\'s date?',
            sender: 'user',
            id: 'id3'
          }, {
            message: 'Today is September 27th.',
            sender: 'robot',
            id: 'id4'
          }]

          
          return(
            <>
              {
                  chatMessages.map((chatMessage) => {
                    return(
                      <ChatMessage 
                        message={chatMessage.message}
                        sender={chatMessage.sender}
                        key={chatMessage.id}
                      />
                    )
                  })
                }
            </>
          )

        }

        // ALT for app (creating App component)
        // and use it instead of the variable 'app' above
        function App() {

          // const chatMessageComponents = chatMessages.map((chatMessage) => {
          //   return(
          //     <ChatMessage 
          //       message={chatMessage.message}
          //       sender={chatMessage.sender}
          //     />
          //   )
          // });

          return(
            <>
              <ChatInput></ChatInput>
              <ChatMessages />
            </>
          )
        }

        const container = document.querySelector('.js-container');
        ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>